@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

@layer base {
  :root {
    /* Brand Colors */
    --color-brand-telegram: #229ED9;
    --color-brand-whatsapp: #25D366;
    --color-brand-instagram-from: #833AB4;
    --color-brand-instagram-via: #FD1D1D;
    --color-brand-instagram-to: #F77737;

    /* Leksika Identity */
    --color-leksika-gradient-1: #e91e8c;
    --color-leksika-gradient-2: #ff4da6;
    --color-leksika-gradient-3: #ff69b4;

    /* Logo Colors */
    --color-logo-pink-start: #ff0090;
    --color-logo-pink-mid: #ff00ae;
    --color-logo-pink-end: #ff00e4;
    --color-logo-pink-alt-end: #ff00ea;
    --color-logo-white-dim: #ffe0e0;

    /* Dev / Status */
    --color-dev-badge-start: #10b981;
    --color-dev-badge-end: #059669;

    /* Constants */
    --color-white: #ffffff;
    --color-black: #000000;

    /* Spectrum (for Color Picker) */
    --color-spectrum-red: #ff0000;
    --color-spectrum-yellow: #ffff00;
    --color-spectrum-green: #00ff00;
    --color-spectrum-cyan: #00ffff;
    --color-spectrum-blue: #0000ff;
    --color-spectrum-magenta: #ff00ff;
  }

  html {
    overflow-y: auto;
    scrollbar-gutter: stable;
  }
  body {
    transition: color 0.5s, background-color 0.5s;
    background-color: var(--color-background);
    color: var(--color-on-background);
  }

  .prose h1 { @apply mb-4 mt-6 text-4xl font-bold text-[var(--color-primary)]; }
  .prose h2 { @apply mb-3 mt-5 text-3xl font-bold text-[var(--color-primary)]; }
  .prose h3 { @apply mb-3 mt-5 text-2xl font-bold text-[var(--color-primary)]; }
  .prose h4 { @apply mb-2 mt-4 text-xl font-bold text-[var(--color-primary)]; }

  .prose p { @apply my-4 leading-relaxed text-[var(--color-on-surface)]; }
  .prose ul { @apply my-4 list-disc pl-6 text-[var(--color-on-surface)]; }
  .prose ol { @apply my-4 list-decimal pl-6 text-[var(--color-on-surface)]; }
  .prose li { @apply my-2; }

  .prose table { 
    @apply w-full my-4 border-separate border-spacing-0 rounded-lg border border-[var(--color-outline-variant)] overflow-hidden; 
  }
  
  .prose th,
  .prose td { 
    @apply border-b border-r border-[var(--color-outline-variant)] px-4 py-2 text-left align-top text-[var(--color-on-surface)]; 
  }
  
  .prose th { 
    @apply font-bold bg-[var(--color-surface-container)] text-[var(--color-on-surface)] border-t-0; 
  }
  
  .prose th:first-child,
  .prose td:first-child { 
    @apply border-l-0; 
  }
  
  .prose th:last-child,
  .prose td:last-child { 
    @apply border-r-0; 
  }
  
  .prose tr:last-child td { 
    @apply border-b-0; 
  }
  
  .prose strong { @apply font-bold text-[var(--color-on-surface)]; }
  .prose em { @apply italic text-[var(--color-on-surface)]; }
}

@layer base {
  .toolbar-button.is-active {
    background-color: var(--color-secondary-container);
    color: var(--color-on-secondary-container);
  }

  .prose .tableWrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .prose table {
    max-width: 100%;
    width: auto;
    display: block;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .prose th,
  .prose td {
    word-break: break-word;
    white-space: normal;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(-360deg);
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   PAGE TRANSITIONS - Stack Effect (Sequential with mode="out-in")
   Fast and smooth - old page leaves quickly, new page enters
   
   Forward (n → n+1): Page n slides LEFT quickly, then page n+1 fades/scales in
   Backward (n → n-1): Page n-1 slides from LEFT quickly, page n fades out
   ═══════════════════════════════════════════════════════════════════════════ */

/* Slide Next (Going forward n → n+1) */
/* Page n leaves fast - slides LEFT and fades */
.slide-next-leave-active {
  transition: transform 0.15s ease-out, opacity 0.15s ease-out;
}
.slide-next-leave-from {
  transform: translateX(0);
  opacity: 1;
}
.slide-next-leave-to {
  transform: translateX(-10%);
  opacity: 0;
}
/* Page n+1 enters - emerges from behind */
.slide-next-enter-active {
  transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}
.slide-next-enter-from {
  transform: scale(0.99);
  opacity: 0.5;
}
.slide-next-enter-to {
  transform: scale(1);
  opacity: 1;
}

/* Slide Prev (Going backward n → n-1) */
/* Page n-1 enters - slides from LEFT */
.slide-prev-enter-active {
  transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}
.slide-prev-enter-from {
  transform: translateX(-10%);
  opacity: 0;
}
.slide-prev-enter-to {
  transform: translateX(0);
  opacity: 1;
}
/* Page n leaves fast - fades/scales to background */
.slide-prev-leave-active {
  transition: transform 0.15s ease-out, opacity 0.15s ease-out;
}
.slide-prev-leave-from {
  transform: scale(1);
  opacity: 1;
}
.slide-prev-leave-to {
  transform: scale(0.98);
  opacity: 0;
}

/* ═══════════════════════════════════════════════════════════════════════════
   ZOOM TRANSITIONS - For entering/exiting focused modes
   - Zoom In: Enter assignment test, enter material view
   - Zoom Out: Exit assignment test, exit material view (back to module)
   - transform-origin uses fixed viewport center for screen-centered zoom
   ═══════════════════════════════════════════════════════════════════════════ */

/* Prevent scrollbar during zoom animations */
.zoom-in-enter-active,
.zoom-in-leave-active,
.zoom-out-enter-active,
.zoom-out-leave-active {
  overflow: hidden;
  will-change: transform, opacity;
}

/* Use overflow:clip instead of hidden to avoid scrollbar gutter changes */
body:has(.zoom-in-enter-active),
body:has(.zoom-in-leave-active),
body:has(.zoom-out-enter-active),
body:has(.zoom-out-leave-active) {
  overflow-x: clip !important;
}

/* Zoom In (Entering focused mode - zoom from screen center or dynamic point) */
.zoom-in-enter-active,
.zoom-in-leave-active {
  transform-origin: var(--zoom-origin-x, center) var(--zoom-origin-y, 40vh);
}
.zoom-in-enter-active {
  transition: transform 0.3s ease-out, opacity 0.3s ease-out;
}
.zoom-in-enter-from {
  transform: scale(0.85);
  opacity: 0;
}
.zoom-in-enter-to {
  transform: scale(1);
  opacity: 1;
}
.zoom-in-leave-active {
  transition: transform 0.25s ease-in, opacity 0.25s ease-in;
}
.zoom-in-leave-from {
  transform: scale(1);
  opacity: 1;
}
.zoom-in-leave-to {
  transform: scale(1.1);
  opacity: 0;
}

/* Zoom Out (Exiting focused mode - zoom back to screen center or dynamic point) */
.zoom-out-enter-active,
.zoom-out-leave-active {
  transform-origin: var(--zoom-origin-x, center) var(--zoom-origin-y, 40vh);
}
.zoom-out-enter-active {
  transition: transform 0.3s ease-out, opacity 0.3s ease-out;
}
.zoom-out-enter-from {
  transform: scale(1.1);
  opacity: 0;
}
.zoom-out-enter-to {
  transform: scale(1);
  opacity: 1;
}
.zoom-out-leave-active {
  transition: transform 0.25s ease-in, opacity 0.25s ease-in;
}
.zoom-out-leave-from {
  transform: scale(1);
  opacity: 1;
}
.zoom-out-leave-to {
  transform: scale(0.85);
  opacity: 0;
}